{% extends 'layout.twig' %}

{% block content %}
        {% block additional_stylesheets %}
            {{ encore_entry_link_tags('search') }}
             {{ encore_entry_link_tags('index') }}
             {{ encore_entry_link_tags('product') }}

            
            
    {% endblock %}

    {% block additional_javascripts %}
            {{ encore_entry_script_tags('product') }}
            {{ encore_entry_script_tags('search') }}

    {% endblock %}




<main> 
<div class="container p-3">
        <div class="row    justify-content-between" >
                <div class="col-8 border p-5  bg-white" style="box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;">
                        <div class="card mb-3" style="border:none;">
                                <div class="row g-3">
                                        <div class="col-md-4"  >
                                          
                                           <img src="{{ asset('build/imgs/products/'~product.id~'.jpg') }}" class="img-fluid rounded-start" alt="...">
                                          
                                         </div>
                                        <div class="col-md-8">
                                          <div class="row ">
                                           <div class="card-body pt-0 ">
                                                <h5 class="card-title position-relative">{{ product.name }}<i class=" {% if liked %} fa-solid {% else %} fa-regular {% endif %} fa-heart position-absolute favorite" id="{{ product.id }}" style="right:0;top:35px;"></i></h5>
                                                {% for i in range(1,5) %}
                                                        <i class=" {% if i <= product.rate %}           
                                                         fa-solid 
                                                         {% else %}
                                                         fa-regular
                                                         {% endif %}
                                                         fa-star text-primary"></i>            
                                                {% endfor %}
                                                <p class="card-text mt-1 pt-3 border-top">{{ product.description }}</p>
                                                <p class="card-text "><span class="fw-bolder">{{ product.discountPrice}}.00 Dhs</span> / <small class="text-muted"><del>{{ product.regularPrice }}.00 Dhs</del></small></p>
                                                <p class="card-text "><small class="{% if product.stock < 20 %} text-danger {% else %} text-muted {% endif %}  " >{{ product.stock }} units {% if product.stock < 20 %} <i class="fa-solid fa-circle-exclamation"></i> {% endif %}</small></p>
                                               
                                                <div class=" d-flex justify-content-between align-items-center " style="overflow:hidden; width:80px; height:25px; border-top:1px solid black; border-bottom:1px solid black; border-radius:30px; margin-top:5px;">
                                                        <i class="sub fa-solid fa-circle-minus fa-xl  text-primary"></i>
                                                        <span class="quantity">1</span>
                                                        <i class="add fa-solid fa-circle-plus fa-xl text-primary"></i>
                                                </div>
                                          </div>
                                          </div>
                                         
                                        </div>
                                </div>
                                <div class="row justify-content-between align-items-center p-2">
                                        <span class="col-md-2 d-flex justify-content-around  ">
                                                <i class="fa-brands fa-facebook fa-xl"></i>
                                                <i class="fa-brands fa-instagram fa-xl"></i>
                                                <i class="fa-brands fa-x-twitter fa-xl"></i>
                                        </span>
                                        {% if product.id in basket|keys %} 
                                        <button class="btn-scondary  col-md-8 fs-4 " disabled value="{{ product.id }}" style="height:50px;border-radius:6px; position:relative;"><i class="fa-solid fa-check" style=" position:absolute ;left:10px;top:25%;"></i>  Added</button>
                                        {% else %}
                                        <button class="btn-primary buy col-md-8 fs-4 " value="{{ product.id }}" style="height:50px;border-radius:6px; position:relative;"><i class="fa-solid fa-cart-plus" style=" position:absolute ;left:10px;top:25%;"></i> Buy</button>

                                        {% endif %} 
                               </div>
                        </div>
                
                </div>
                <div class="col-4 " >
                        <div class="container bg-white border text-center" style="height:100%;box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;">
                               <p class="border-bottom">feedback<p>
                        </div>
                
                </div>
        </div>
        <div class="row border bg-white mt-4 ">
                 <h5 class=" title text-white text-center bg-primary p-1 mb-0">Suggetion</h5>
   

    
    <div class="row justify-content-left m-1 p-0 pt-2 ">
      {% set break = false %}
      {% set count = 0 %}
      {% for i in products %}
      {%  if not break %}         
                   
        
          {% if i.category == product.category and i.id != product.id%}
        {% set count = count + 1%}
      <div class="col-auto">
        
            <div class="card  text-start product-card product-card-widget position-relative" id="{{ i.id }}">
                <img src="{{ asset('build/imgs/products/'~i.id~'.jpg') }}" class="card-img-top" alt="...">
                <div class="promotion position-absolute ">-{{ (100-((i.discountPrice/i.regularPrice)*100))|round(0, 'floor')}}%</div>
                <div class="card-body">
                    <h6 class="truncate-text">{{ i.name }}</h6>
                    <h6 >{{ i.discountPrice }}.00 Dhs</h6>
                    <p class="d-flex align-items-center justify-content-around">
                          <small><del>{{ i.regularPrice }}.00 Dhs<del> </small>
                          <button  class="btn outline-none btn-primary basket-button ignore" value={{ i.id }} style="border-radius:50px;">
                          <i class="fa-solid
                          {% if i.id in basket|keys %}
                            fa-check
                          {% else %}
                           fa-cart-shopping
                           {% endif %}"
                           ></i>
                          
                          </button>
                    </p>
                    
                </div> 
            
          </div> 
             </div>
        {% endif %}
         
                   
                  
                  {% if count >= 7 %}
                    {% set break = true %}
                  {% endif %}
       
          {% endif %}
          {% endfor %}
           
     </div>

    
  </div>
        </div>

<script>

        

</script>

</main>

{% endblock %}